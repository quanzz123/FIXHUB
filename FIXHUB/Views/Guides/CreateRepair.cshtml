@model FIXHUB.Models.RepairGuide
<div class="container editor-container">
    <div class="row">
        <div class="col-12">
            <h1 class="mt-4 mb-4 ps-3">Hướng dẫn về </h1>

            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs" id="editorTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="introduction-tab" data-bs-toggle="tab" data-bs-target="#introduction" type="button" role="tab">Giới thiệu chung</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab" disabled>Chi tiết</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link " id="steps-tab" data-bs-toggle="tab" data-bs-target="#steps" type="button" role="tab" disabled>Các bước hướng dẫn</button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="editorTabsContent">
                <!-- Introduction Tab -->
                <div class="tab-pane fade show active" id="introduction" role="tabpanel" aria-labelledby="introduction-tab">
                    <div class="step-editor">
                        <h2>Giới thiệu chung</h2>
                        <form asp-action="CreateRepair" method="post" enctype="multipart/form-data">
                            <input type="hidden" asp-for="CategoryId" value="@ViewBag.CategoryId" />

                            <div class="mb-3">
                                <label asp-for="Title" for="guideTitle" class="form-label">Tiêu đề hường dẫn</label>
                                <input asp-for="Title" type="text" class="form-control" id="guideTitle" >
                            </div>
                            <div class="mb-3">
                                @* <label asp-for="Summary" for="guideSummary" class="form-label">Tóm tắt</label> *@
                                @Html.LabelFor(model => model.Summary, htmlAttributes: new { @class = "form-label" })
                                @* <textarea asp-for="Summary" class="form-control" id="guideSummary" rows="3"></textarea> *@
                                @Html.TextAreaFor(model => model.Summary, new { @class = "form-control content-editor" })
                                @Html.ValidationMessageFor(model => model.Summary, "", new { @class = "text-danger" })
                        
                               
                                  
                                    
                                
                            </div>
                            <div class="mb-3">
                                <label  class="form-label">Hình ảnh</label>
                                <input type="file" name="ImageFile" class="form-control" />
                            </div>
                            @* <div class="mb-3"> *@
                            @*     <label for="guideDifficulty" class="form-label">Độ khó</label> *@
                            @*     <select class="form-select" id="guideDifficulty"> *@
                            @*         <option>Easy</option> *@
                            @*         <option selected>Moderate</option> *@
                            @*         <option>Difficult</option> *@
                            @*     </select> *@
                            @* </div> *@
                            @* <div class="mb-3"> *@
                            @*     <label for="guideTime" class="form-label">Thời gian</label> *@
                            @*     <input type="text" class="form-control" id="guideTime" value="15-30 minutes"> *@
                            @* </div> *@
                            <button type="submit" class="btn btn-primary">Lưu lại</button>
                        </form>
                        
                    </div>
                </div>

                <!-- Details Tab -->
                <div class="tab-pane fade" id="details" role="tabpanel" aria-labelledby="details-tab" >
                    <div class="p-4">
                        <h3>Details</h3>
                        <div class="mb-3">
                            <label for="detailsTools" class="form-label">Tools Required</label>
                            <textarea class="form-control" id="detailsTools" rows="4">- Small Phillips screwdriver
                                - Pry tool (optional)
                                - Anti-static wrist strap (recommended)
                            </textarea>
                        </div>
                        <div class="mb-3">
                            <label for="detailsParts" class="form-label">Parts Required</label>
                            <textarea class="form-control" id="detailsParts" rows="4">- OWC Envoy Pro Enclosure
                                - Mac SSD (compatible with the enclosure)
                            </textarea>
                        </div>
                    </div>
                </div>

                <!-- Steps Tab -->
                <div class="tab-pane fade " id="steps" role="tabpanel" aria-labelledby="steps-tab" tabindex="-1" aria-disabled="true">
                    <div class="row">
                        <!-- Left Side: Step Editor -->
                        <div class="col-md-8">
                            <div class="step-editor">
                                <h3 id="stepTitle">Editing Step 1 — Add a title</h3>
                                <input type="text" class="form-control mt-2 mb-3" id="stepTitleInput" placeholder="Enter step title">

                                <div class="d-flex align-items-center mb-3">
                                    <div class="me-2">Step Type:</div>
                                    <button class="btn step-type-btn active me-2" id="imageTypeBtn">
                                        <i class="fas fa-image me-1"></i> Image
                                    </button>
                                    <button class="btn step-type-btn" id="mediaTypeBtn">
                                        <i class="fas fa-film me-1"></i> Media
                                    </button>
                                </div>

                                <div class="image-preview mb-3" id="imagePreview">
                                    <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step preview" id="previewImage">
                                </div>

                                <label class="custom-file-upload w-100">
                                    <input type="file" class="file-input" id="imageUpload" accept="image/*">
                                    <i class="fas fa-upload me-2"></i> Upload Image
                                </label>

                                <div class="thumbnail-container">
                                    <div class="mini-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Thumbnail 1">
                                    </div>
                                    <div class="mini-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Thumbnail 2">
                                    </div>
                                    <div class="mini-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Thumbnail 3">
                                    </div>
                                </div>
                                <div class="drag-text">Drag to rearrange</div>

                                <div class="content-editor">
                                    <div class="mb-3">
                                        <label for="stepContent" class="form-label">Step Instructions</label>
                                        <textarea class="form-control" id="stepContent" rows="4">To open the enclosure, pull the top half down toward the wedged end and lift it away from the bottom half.</textarea>
                                    </div>
                                </div>

                                <button class="btn btn-primary" id="saveStepBtn">Save</button>

                                <div class="d-flex justify-content-between mt-4">
                                    <button class="btn btn-outline-danger" id="deleteStepBtn">
                                        <i class="fas fa-trash me-1"></i> Delete Step
                                    </button>
                                    <button class="btn btn-outline-primary" id="insertStepBtn">
                                        <i class="fas fa-plus me-1"></i> Insert Step
                                    </button>
                                </div>

                                <div class="navigation-buttons">
                                    <button class="btn btn-outline-secondary" id="prevBtn">
                                        <i class="fas fa-arrow-left me-1"></i> Introduction
                                    </button>
                                    <button class="btn btn-outline-primary" id="nextBtn">
                                        Next <i class="fas fa-arrow-right ms-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Right Side: Steps Overview -->
                        <div class="col-md-4 border-start">
                            <div class="p-3">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h4>Steps</h4>
                                    <button class="btn btn-sm btn-outline-secondary">
                                        <i class="fas fa-arrows-alt me-1"></i> Rearrange
                                    </button>
                                </div>

                                <div class="step-thumbnails">
                                    <div class="step-thumbnail active">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step 1">
                                        <div class="step-number">1</div>
                                    </div>
                                    <div class="step-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step 2">
                                        <div class="step-number">2</div>
                                    </div>
                                    <div class="step-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step 3">
                                        <div class="step-number">3</div>
                                    </div>
                                    <div class="step-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step 4">
                                        <div class="step-number">4</div>
                                    </div>
                                    <div class="step-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step 5">
                                        <div class="step-number">5</div>
                                    </div>
                                    <div class="step-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step 6">
                                        <div class="step-number">6</div>
                                    </div>
                                    <div class="step-thumbnail">
                                        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-DtklckhUywDG2wMdZMDhbeKovAFjpC.png" alt="Step 7">
                                        <div class="step-number">7</div>
                                    </div>
                                    <div class="step-thumbnail add-step">
                                        <div class="image-upload-placeholder">
                                            <i class="fas fa-plus"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Help Button -->
<a href="#" class="help-btn">
    <i class="fas fa-question"></i>
</a>

<!-- Bootstrap JS Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>

<!-- Custom JavaScript -->
<script>
    $(document).ready(function () {
        $('.content-editor').summernote({
            placeholder: 'Hãy viết nội dung vào đây',
            tabsize: 2,
            height: 120,
            toolbar: [
                ['style', ['style']],
                ['font', ['bold', 'underline', 'clear']],
                ['color', ['color']],
                ['para', ['ul', 'ol', 'paragraph']],
                ['table', ['table']],
                ['insert', ['link', 'picture', 'video']],
                ['view', ['fullscreen', 'codeview', 'help']]
            ]
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
    // Image upload preview
    const imageUpload = document.getElementById('imageUpload');
    const previewImage = document.getElementById('previewImage');

    imageUpload.addEventListener('change', function() {
    const file = this.files[0];
    if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
    previewImage.src = e.target.result;
    }
    reader.readAsDataURL(file);
    }
    });

    // Step type buttons
    const imageTypeBtn = document.getElementById('imageTypeBtn');
    const mediaTypeBtn = document.getElementById('mediaTypeBtn');

    imageTypeBtn.addEventListener('click', function() {
    imageTypeBtn.classList.add('active');
    mediaTypeBtn.classList.remove('active');
    });

    mediaTypeBtn.addEventListener('click', function() {
    mediaTypeBtn.classList.add('active');
    imageTypeBtn.classList.remove('active');
    });

    // Step thumbnails
    const stepThumbnails = document.querySelectorAll('.step-thumbnail:not(.add-step)');

    stepThumbnails.forEach(thumbnail => {
    thumbnail.addEventListener('click', function() {
    stepThumbnails.forEach(t => t.classList.remove('active'));
    this.classList.add('active');

    // Update step title based on selected step
    const stepNumber = this.querySelector('.step-number').textContent;
    document.getElementById('stepTitle').textContent = `Editing Step ${stepNumber} — Add a title`;
    });
    });

    // Save button
    const saveStepBtn = document.getElementById('saveStepBtn');
    saveStepBtn.addEventListener('click', function() {
    alert('Step saved successfully!');
    });

    // Delete step button
    const deleteStepBtn = document.getElementById('deleteStepBtn');
    deleteStepBtn.addEventListener('click', function() {
    if (confirm('Are you sure you want to delete this step?')) {
    alert('Step deleted!');
    }
    });

    // Insert step button
    const insertStepBtn = document.getElementById('insertStepBtn');
    insertStepBtn.addEventListener('click', function() {
    alert('New step inserted!');
    });
    });
</script>

